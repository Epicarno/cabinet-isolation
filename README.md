# –ò–∑–æ–ª—è—Ü–∏—è —à–∫–∞—Ñ–æ–≤

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–∏ –Ω–∞ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏ –ø–æ —à–∫–∞—Ñ–∞–º –∞–≤—Ç–æ–º–∞—Ç–∏–∫–∏.

## –ü—Ä–æ–±–ª–µ–º–∞

–í –ø—Ä–æ–µ–∫—Ç–µ SCADA WinCC OA —Å–∫—Ä–∏–ø—Ç `PNR_Ventcontent.ctl` (~7000 —Å—Ç—Ä–æ–∫, 59 –∫–ª–∞—Å—Å–æ–≤) –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç **–≤—Å–µ** —à–∫–∞—Ñ—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∫–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –ö–∞–∂–¥—ã–π XML-–æ–±—ä–µ–∫—Ç –º–Ω–µ–º–æ—Å—Ö–µ–º—ã –ø–æ–¥–∫–ª—é—á–∞–µ—Ç —ç—Ç–æ—Ç –µ–¥–∏–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç if-–±–ª–æ–∫–∏ –≤–∏–¥–∞:

```
if (settings["struct"] == "TAIRA_INT_DI") { ... }
if (settings["struct"] == "KORF_AI") { ... }
// ... –µ—â—ë –¥–µ—Å—è—Ç–∫–∏ –∫–ª–∞—Å—Å–æ–≤, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –Ω—É–∂–Ω—ã 5-10
```

–≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫:
- **–õ–∏—à–Ω–µ–π –Ω–∞–≥—Ä—É–∑–∫–µ** ‚Äî –∫–∞–∂–¥—ã–π —à–∫–∞—Ñ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ 59 –∫–ª–∞—Å—Å–æ–≤
- **–°–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç –≤—Å–µ —à–∫–∞—Ñ—ã
- **–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** —à–∫–∞—Ñ–æ–≤

## –†–µ—à–µ–Ω–∏–µ

–ü–∞–π–ø–ª–∞–π–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **–ò–∑–æ–ª–∏—Ä—É–µ—Ç XML-–æ–±—ä–µ–∫—Ç—ã** ‚Äî –∫–æ–ø–∏—Ä—É–µ—Ç —à–∞–±–ª–æ–Ω—ã –∏–∑ –æ–±—â–µ–π –ø–∞–ø–∫–∏ `objects/PV/` –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ `objects/objects_<–®–ö–ê–§>/PV/` –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤—Å–µ —Å—Å—ã–ª–∫–∏
2. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ .ctl** ‚Äî –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç CSV-–æ–ø–∏—Å–∞–Ω–∏—è –º–Ω–µ–º–æ—Å—Ö–µ–º –∫–∞–∂–¥–æ–≥–æ —à–∫–∞—Ñ–∞, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫–∏–µ struct-–∫–ª–∞—Å—Å—ã —Ä–µ–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π `Ventcontent_<–®–ö–ê–§>.ctl` —Ç–æ–ª—å–∫–æ —Å –Ω—É–∂–Ω—ã–º–∏ –∫–ª–∞—Å—Å–∞–º–∏, global-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∏ mapping-–∑–∞–ø–∏—Å—è–º–∏
3. **–ß–∏—Å—Ç–∏—Ç XML –æ—Ç –ª–∏—à–Ω–µ–≥–æ –∫–æ–¥–∞** ‚Äî —É–¥–∞–ª—è–µ—Ç if-–±–ª–æ–∫–∏ –¥–ª—è –∫–ª–∞—Å—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ —Å–∫—Ä–∏–ø—Ç–µ –¥–∞–Ω–Ω–æ–≥–æ —à–∫–∞—Ñ–∞
4. **–ó–∞—â–∏—â–∞–µ—Ç –∫–ª–∞—Å—Å—ã –∏–∑ –¥—Ä—É–≥–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤** ‚Äî –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç `#uses` –¥–∏—Ä–µ–∫—Ç–∏–≤—ã, –Ω–∞—Ö–æ–¥–∏—Ç –∫–ª–∞—Å—Å—ã –∏–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä `P5_V5_SkifContent.ctl`) –∏ –∑–∞–ø—Ä–µ—â–∞–µ—Ç –∏—Ö —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ JSON-—Ñ–∞–π–ª –æ–±–º–µ–Ω–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Modules/
‚îú‚îÄ‚îÄ scripts/                        ‚Üê Python-—Å–∫—Ä–∏–ø—Ç—ã (—ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)
‚îÇ   ‚îú‚îÄ‚îÄ parse_utils.py              ‚Üê –æ–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –∏ –ø—É—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ report_utils.py             ‚Üê –∑–∞–ø–∏—Å—å –æ—Ç—á—ë—Ç–æ–≤ (--append —Ä–µ–∂–∏–º)
‚îÇ   ‚îú‚îÄ‚îÄ run_pipeline.bat            ‚Üê –∑–∞–ø—É—Å–∫ –ø–∞–π–ø–ª–∞–π–Ω–∞
‚îÇ   ‚îî‚îÄ‚îÄ *.py                        ‚Üê —Å–∫—Ä–∏–ø—Ç—ã –ø–∞–π–ø–ª–∞–π–Ω–∞ (—Å–º. –Ω–∏–∂–µ)
‚îÇ
‚îú‚îÄ‚îÄ ventcontent/                    ‚Üê –ø—Ä–æ–µ–∫—Ç WinCC OA
‚îÇ   ‚îú‚îÄ‚îÄ panels/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vision/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LCSMnemo/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ SHD_03_1/       ‚Üê –ø–∞–ø–∫–∞ —à–∫–∞—Ñ–∞
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ *.xml       ‚Üê –º–Ω–µ–º–æ—Å—Ö–µ–º—ã
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ *.csv       ‚Üê –æ–ø–∏—Å–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ (–∫–æ–ª–æ–Ω–∫–∞ struct)
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ SHD_05_1/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ...             ‚Üê ~24 —à–∫–∞—Ñ–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ objects/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ PV/                 ‚Üê —à–∞–±–ª–æ–Ω—ã –æ–±—ä–µ–∫—Ç–æ–≤
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ objects_SHD_03_1/   ‚Üê –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã (–≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è)
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ scripts/
‚îÇ       ‚îî‚îÄ‚îÄ libs/
‚îÇ           ‚îî‚îÄ‚îÄ objLogic/
‚îÇ               ‚îú‚îÄ‚îÄ PNR_Ventcontent.ctl        ‚Üê –æ—Ä–∏–≥–∏–Ω–∞–ª (59 –∫–ª–∞—Å—Å–æ–≤)
‚îÇ               ‚îú‚îÄ‚îÄ Ventcontent_SHD_03_1.ctl   ‚Üê –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è split_ctl.py
‚îÇ               ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îî‚îÄ‚îÄ reports/                        ‚Üê –æ—Ç—á—ë—Ç—ã (–≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    ‚îú‚îÄ‚îÄ split_ctl_report.txt
    ‚îú‚îÄ‚îÄ other_scripts.json          ‚Üê JSON –æ–±–º–µ–Ω –º–µ–∂–¥—É —Å–∫—Ä–∏–ø—Ç–∞–º–∏
    ‚îî‚îÄ‚îÄ ...
```

## –ü–∞–π–ø–ª–∞–π–Ω (9 —à–∞–≥–æ–≤)

### –ó–∞–ø—É—Å–∫

```bash
run_pipeline.bat                    # –ø–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫
run_pipeline.bat --append           # –¥–æ–ø–∏—Å—ã–≤–∞—Ç—å –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ—Ç—á—ë—Ç—ã
run_pipeline.bat --from 5           # –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å —à–∞–≥–∞ 5
run_pipeline.bat --only 9           # –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —à–∞–≥ 9
```

### –®–∞–≥–∏

| # | –°–∫—Ä–∏–ø—Ç | –§–∞–∑–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|--------|------|----------|
| 1 | `process_mnemo.py` | –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ | –î–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∫–∞—Ñ–∞ –∫–æ–ø–∏—Ä—É–µ—Ç `objects/PV/` ‚Üí `objects/objects_<–®–ö–ê–§>/PV/` —á–µ—Ä–µ–∑ `shutil.copytree`. –í XML –º–Ω–µ–º–æ—Å—Ö–µ–º –∑–∞–º–µ–Ω—è–µ—Ç `objects/PV/...` ‚Üí `objects/objects_<–®–ö–ê–§>/PV/...` |
| 2 | `fix_cross_refs.py` | –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ | –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç –∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–∫—Ä—ë—Å—Ç–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –≤–Ω—É—Ç—Ä–∏ –æ–±—ä–µ–∫—Ç–æ–≤: `objects/PV/...` ‚Üí `objects/objects_<–®–ö–ê–§>/PV/...`. –ö–æ–ø–∏—Ä—É–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –æ–±—ä–µ–∫—Ç—ã –∏–∑ –æ–±—â–µ–π –ø–∞–ø–∫–∏ |
| 3 | `cleanup_orphans.py` | –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ | –£–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª—ã –≤ `objects_<–®–ö–ê–§>/`, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –Ω–∏–∫—Ç–æ –Ω–µ —Å—Å—ã–ª–∞–µ—Ç—Å—è (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã `copytree` ‚Äî –æ–±—ä–µ–∫—Ç—ã –æ—Ç –¥—Ä—É–≥–∏—Ö —à–∫–∞—Ñ–æ–≤). –ê—Ä–≥—É–º–µ–Ω—Ç `2` = —É–¥–∞–ª—è—Ç—å, –∏–Ω–∞—á–µ —Ç–æ–ª—å–∫–æ –æ—Ç—á—ë—Ç |
| 4 | `validate_refs.py` | –ü—Ä–æ–≤–µ—Ä–∫–∞ | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –≤—Å–µ —Å—Å—ã–ª–∫–∏ `objects/...xml` –≤ XML —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã. –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —Å—Å—ã–ª–∫–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ `//` –∏ `/* */` |
| 5 | `split_ctl.py` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è | –ü–∞—Ä—Å–∏—Ç `PNR_Ventcontent.ctl` –Ω–∞ —Å–µ–∫—Ü–∏–∏ (uses, –∫–ª–∞—Å—Å—ã, setValueLib, global, mapping). –î–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∫–∞—Ñ–∞ —á–∏—Ç–∞–µ—Ç CSV ‚Üí –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç struct ‚Üí –Ω–∞—Ö–æ–¥–∏—Ç –Ω—É–∂–Ω—ã–µ –∫–ª–∞—Å—Å—ã (+ —Ä–æ–¥–∏—Ç–µ–ª–∏ + —á–µ—Ä–µ–∑ –º–∞–ø–ø–∏–Ω–≥) ‚Üí —Å–æ–±–∏—Ä–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π `Ventcontent_<–®–ö–ê–§>.ctl` |
| 6 | `replace_scripts.py` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è | –í XML –æ–±—ä–µ–∫—Ç–∞—Ö –∑–∞–º–µ–Ω—è–µ—Ç `#uses "objLogic/PNR_Ventcontent"` –∏ `Denostration_Ventcontent` –Ω–∞ `Ventcontent_<–®–ö–ê–§>.ctl`. –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç, —É–¥–∞–ª—è–µ—Ç –¥—É–±–ª–∏ `#uses` |
| 7 | `scan_problems.py` | üìä –ê–Ω–∞–ª–∏–∑ | –ò—â–µ—Ç –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã: –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å `&quot;` (–ª–æ–º–∞—é—Ç –ø–∞—Ä—Å–∏–Ω–≥), `else if` + struct, `switch` + struct |
| 8 | `check_other_scripts.py` | üìä –ê–Ω–∞–ª–∏–∑ | –î–ª—è –∫–∞–∂–¥–æ–≥–æ XML –Ω–∞—Ö–æ–¥–∏—Ç `#uses` ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–ª–∞—Å—Å—ã –∏–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤. –ï—Å–ª–∏ struct-–∫–ª–∞—Å—Å –Ω–µ –∏–∑ Ventcontent, –Ω–æ –µ—Å—Ç—å –≤ –¥—Ä—É–≥–æ–º —Å–∫—Ä–∏–ø—Ç–µ ‚Äî –ø–æ–º–µ—á–∞–µ—Ç –∫–∞–∫ –∑–∞—â–∏—â—ë–Ω–Ω—ã–π. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç `reports/other_scripts.json` |
| 9 | `cleanup_classes.py` | üîß –û—á–∏—Å—Ç–∫–∞ | –ó–∞–≥—Ä—É–∂–∞–µ—Ç `other_scripts.json`, –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –∏–∑ `Ventcontent_<–®–ö–ê–§>.ctl`. –£–¥–∞–ª—è–µ—Ç if-–±–ª–æ–∫–∏ –¥–ª—è –∫–ª–∞—Å—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –Ω–∏ —Ç–∞–º, –Ω–∏ —Ç–∞–º |

### –°–≤—è–∑—å –º–µ–∂–¥—É —à–∞–≥–∞–º–∏

```
–®–∞–≥ 8: check_other_scripts.py
    ‚Üì –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç
  reports/other_scripts.json
    ‚Üì —á–∏—Ç–∞–µ—Ç
–®–∞–≥ 9: cleanup_classes.py
    ‚Üí –ù–ï —É–¥–∞–ª—è–µ—Ç if-–±–ª–æ–∫–∏ –¥–ª—è –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤
```

## –û–±—â–∏–µ –º–æ–¥—É–ª–∏

### `parse_utils.py`

–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—É—Ç–µ–π –∏ —É—Ç–∏–ª–∏—Ç—ã:

| –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ | –ü—É—Ç—å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------|------------|
| `VENT_DIR` | `../ventcontent/` | –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ WinCC OA |
| `PANELS_DIR` | `ventcontent/panels/` | –ü–∞–Ω–µ–ª–∏ –∏ –æ–±—ä–µ–∫—Ç—ã |
| `OBJECTS_DIR` | `panels/objects/` | XML-–æ–±—ä–µ–∫—Ç—ã |
| `VISION_DIR` | `panels/vision/` | –ú–Ω–µ–º–æ—Å—Ö–µ–º—ã |
| `LCSMEMO_DIR` | `vision/LCSMnemo/` | –ü–∞–ø–∫–∏ —à–∫–∞—Ñ–æ–≤ —Å CSV –∏ XML |
| `CTL_DIR` | `ventcontent/scripts/libs/objLogic/` | –°–∫—Ä–∏–ø—Ç—ã WinCC OA (.ctl) |
| `REPORT_DIR` | `../reports/` | –ü–∞–ø–∫–∞ –æ—Ç—á—ë—Ç–æ–≤ |

–£—Ç–∏–ª–∏—Ç—ã:
- **`read_text_safe(path)`** ‚Äî —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å fallback UTF-8 ‚Üí CP1251
- **`find_matching_brace(text, pos)`** ‚Äî –ø–æ–∏—Å–∫ –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–π `}` —Å —É—á—ë—Ç–æ–º —Å—Ç—Ä–æ–∫ (`"..."`, `&quot;...&quot;`, `\"...\"`) –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (`//`, `/* */`)
- **`find_cabinet_dirs(objects_dir)`** ‚Äî –ø–æ–∏—Å–∫ –ø–∞–ø–æ–∫ `objects_<–®–ö–ê–§>/`

### `report_utils.py`

- **`write_report(path, lines)`** ‚Äî –∑–∞–ø–∏—Å—å –æ—Ç—á—ë—Ç–∞. –ë–µ–∑ `--append` –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç, —Å `--append` –¥–æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å —Ç–∞–π–º—Å—Ç–∞–º–ø–æ–º

## –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

| –°–∫—Ä–∏–ø—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| `full_audit.py` | –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç XML: –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã –∫–∞–≤—ã—á–µ–∫ –≤–æ–∫—Ä—É–≥ struct, –ø–∞—Ç—Ç–µ—Ä–Ω—ã `#uses`, —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –∫–ª–∞—Å—Å–æ–≤ |
| `check_line_endings.py` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —Å—Ç—Ä–æ–∫ (CRLF/LF/Mixed) –≤–æ –≤—Å–µ—Ö XML |
| `fix_line_endings.py` | –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è CRLF ‚Üí LF –≤ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö `Ventcontent_*.ctl` |
| `fix_xml_line_endings.py` | –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è CRLF ‚Üí LF –≤–æ –≤—Å–µ—Ö XML (objects + vision) |

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –¢—Ä–∏ —Ñ–æ—Ä–º–∞—Ç–∞ –∫–∞–≤—ã—á–µ–∫ –≤ XML

–í XML-–æ–±—ä–µ–∫—Ç–∞—Ö WinCC OA —Å—Ç—Ä–æ–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç—Å—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:

| –§–æ—Ä–º–∞—Ç | –ì–¥–µ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ |
|--------|-----------------|------------|
| `&quot;struct&quot;` | CDATA —Å–µ–∫—Ü–∏–∏ | ~431 |
| `\"struct\"` | –ê—Ç—Ä–∏–±—É—Ç—ã value= | ~40 |
| `"struct"` | –û–±—ã—á–Ω—ã–µ (—Ä–µ–¥–∫–æ) | –µ–¥–∏–Ω–∏—Ü—ã |

–í—Å–µ —Ç—Ä–∏ —Ñ–æ—Ä–º–∞—Ç–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ `cleanup_classes.py` –∏ `find_matching_brace()`.

### –°–∫–æ–±–∫–∏ –≤ —Å—Ç—Ä–æ–∫–∞—Ö

–ö–æ–¥ –≤–∏–¥–∞ `setValueLib("state", "foreCol", "{54,205,45}")` —Å–æ–¥–µ—Ä–∂–∏—Ç `{` –∏ `}` –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ª–∏—Ç–µ—Ä–∞–ª–æ–≤. –ù–∞–∏–≤–Ω—ã–π –ø–æ–¥—Å—á—ë—Ç —Å–∫–æ–±–æ–∫ –ª–æ–º–∞–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥. –†–µ—à–µ–Ω–∏–µ ‚Äî `find_block_end()` –∏ `find_matching_brace()` –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–æ–∫ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.

### setValueLib –º–µ–∂–¥—É –∫–ª–∞—Å—Å–∞–º–∏

–§—É–Ω–∫—Ü–∏—è `setValueLib` (~—Å—Ç—Ä–æ–∫–∞ 5453 –æ—Ä–∏–≥–∏–Ω–∞–ª–∞) –Ω–∞—Ö–æ–¥–∏—Ç—Å—è **–º–µ–∂–¥—É** –∫–ª–∞—Å—Å–∞–º–∏, –Ω–µ –≤–Ω—É—Ç—Ä–∏ –Ω–∏—Ö. –ü–∞—Ä—Å–µ—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –µ—ë –æ—Ç–¥–µ–ª—å–Ω–æ –∏ –≤–∫–ª—é—á–∞–µ—Ç –≤ –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –Ω—É–∂–Ω—ã–π –∫–ª–∞—Å—Å –µ—ë –≤—ã–∑—ã–≤–∞–µ—Ç.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10+
- –ü—Ä–æ–µ–∫—Ç WinCC OA –≤ `../ventcontent/` —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º `PNR_Ventcontent.ctl`

## –¶–µ–ª–µ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞

–†–∞–±–æ—á–∞—è —Å—Ä–µ–¥–∞ ‚Äî **Linux**, UTF-8, Unix LF (WinCC OA).
–°–∫—Ä–∏–ø—Ç—ã –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏ –Ω–∞ **Windows** –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
